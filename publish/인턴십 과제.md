ğŸ”¨
## ì±„íŒ…ë°© êµ¬í˜„

![[Pasted image 20230629142016.png|300]]



### í•µì‹¬ êµ¬í˜„

- ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ë©”ì„¸ì§€ ë°ì´í„°ë¥¼ í™”ë©´ì— ì¶œë ¥í•©ë‹ˆë‹¤. (ì„œë²„ api í˜¸ì¶œ)
    
    api í˜¸ì¶œ ì£¼ì†Œ : [http://test.vanillabridge.com/test_data](http://test.vanillabridge.com/test_data)
    
    api í˜¸ì¶œ ì‹œ return ê°’ í˜•íƒœ :
    
    [{
    
    user_id: 1/2, // (1ì€ ë‚´ ì•„ì´ë””, 2ëŠ” ë‹¤ë¥¸ ì‚¬ëŒ ì•„ì´ë””)
    
    user_name: xxx,
    
    photo_url: [https://aa.aa.com](https://aa.aa.com),
    
    created_at: 2023-06-22 12:00:00,
    http://test.vanillabridge.com/test_data
    msg: {mtype: 'text', content: 'ë©”ì‹œì§€ë‚´ìš©'}, // (mtype ì€ í…ìŠ¤íŠ¸ì™€ photo ê°€ ìˆëŠ”ë° mtype ë§Œ ë³´ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤)
    
    }]
    
    - ë‚´ ë©”ì„¸ì§€(user_id==1)
    - [x] ìš°ì¸¡ì •ë ¬
    - [x] ë©”ì„¸ì§€ë³„ë¡œ ë©”ì„¸ì§€ ë‚´ìš©, ë³´ë‚¸ ì‹œê° ì¶œë ¥
    - [x] ìƒëŒ€ ë©”ì„¸ì§€(user_id==2)
    - [x] ì¢Œì¸¡ì •ë ¬
    - [x] ë©”ì„¸ì§€ë³„ë¡œ ì‚¬ì§„ ì´ë¯¸ì§€, ì´ë¦„, ë©”ì„¸ì§€ ë‚´ìš©, ë³´ë‚¸ ì‹œê° ì¶œë ¥
- ë©”ì„¸ì§€ëŠ” created_at(ë³´ë‚¸ì‹œê°„) ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.(created_at ì´ ê°™ìœ¼ë©´ id ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´ ë©ë‹ˆë‹¤)
#### ê³¼ì • ì •ë¦¬í•˜ê¸° 
    
- [x] msg.mtype ì´ photo ì¸ ë©”ì‹œì§€ëŠ” ë¬´ì‹œí•˜ì‹œë©´ ë©ë‹ˆë‹¤.
```ts
			{messageList &&
				messageList.map((message, index) => {
					if (message.msg.mtype === "photo") {
						return null;
					}
					console.log("in map", message);
					return <MessageBox key={index} message={message} />;
			})}
```
ìœ„ì™€ ê°™ì´ ì–¼ë¦¬ë¦¬í„´ìœ¼ë¡œ photoë©´ nullì„ ë¦¬í„´í•˜ë„ë¡ êµ¬í˜„

    
- [x] ë©”ì„¸ì§€ ì…ë ¥ì°½ í…ìŠ¤íŠ¸ ì…ë ¥ ì „ placeholder: â€œë©”ì„¸ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”â€
    
- ë©”ì„¸ì§€ ì…ë ¥ì°½ì—ì„œ í…ìŠ¤íŠ¸ ì…ë ¥ í›„, ë³´ë‚´ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ì±„íŒ…ì´ í™”ë©´ì— ì¶”ê°€ë©ë‹ˆë‹¤. ë©”ì‹œì§€ ì…ë ¥í•œ ì‹œê°„ì„ ë³´ë‚¸ ì‹œê°„ìœ¼ë¡œ ê¸°ë¡í•˜ë©´ ë©ë‹ˆë‹¤.(ì„œë²„ í˜¸ì¶œ ì•ˆí•´ë„ ë¨)
#### ê³¼ì • ì •ë¦¬í•˜ê¸° 
í˜„ì¬ useMessage ë¼ëŠ” í›…ì„ í™œìš©í•´ì„œ ëª¨ë“  messageListë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆì—ˆë‹¤. useEffectì— ë¹ˆ ì˜ì¡´ì„±ì„ ì£¼ì–´ í•¨ìˆ˜ê°€ ì‹¤í–‰ë ë•Œ í•œë²ˆ getMessage() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ í•˜ì—¬ serverë¡œ ë¶€í„° Messageë¥¼ ë°›ì•„ì˜¨ë‹¤. ê·¸ ì´í›„ ì„œë²„ ìƒíƒœë¥¼ stateì— í• ë‹¹í•˜ì—¬ í›…ì˜ ë¦¬í„´ ê°ì²´ì— ë„£ì–´ì£¼ì—ˆë‹¤.

ì—¬ê¸°ì„œ ë¬¸ì œëŠ” useEffect. í˜„ì¬ useMessage ì•ˆì—ì„œ useEffectë¡œ ì¸í•´ì„œ í•˜ë‚˜ì˜ ê¸°ëŠ¥ ë°–ì— í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ ë°œìƒ. useEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì— ì›í•˜ëŠ” ì„œë²„ í˜¸ì¶œì— ì˜í•´ ë³€í•˜ëŠ” ê°’ì„ ë„£ì–´ ì œì–´í•  ìˆ˜ ìˆì§€ë§Œ GetMessageê°™ì€ ê²½ìš° ì–´ë– í•œ ê°’ë„ ì—†ë‹¤. ê·¸ë˜ì„œ useMessage í›…ì—ì„œ ë‹¤ë¥¸ ì„œë²„ì™€ì˜ í†µì‹ ì„ í•˜ì§€ ëª»í•˜ê²Œ ëë‹¤. 

ë§Œì•½ react-queryë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ìë™ì ìœ¼ë¡œ í›…ì„ ì¼ìœ¼ì¼œ dataë¡œ ë°˜í™˜í•´ì£¼ê¸°ì— êµ¬í˜„ì´ í›¨ì”¬ ì‰½ê² ì§€ë§Œ react-queryì˜ ì¥ì ì¸ caching ë° ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì´ì ì„ ì‚´ë¦´ ë§Œí¼ í° ê³¼ì œê°€ ì•„ë‹ˆê¸°ì— ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ëŸ¼ ì–´ë–»ê²Œ í•˜ëŠ”ê²Œ ì¢‹ì„ê¹Œ? 

1. contextë¥¼ ë§Œë“¤ì–´ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœë¥¼ ê³µìœ í• ê¹Œ? contextì—ëŠ” ë§ì´ ë°”ë€Œì§€ ì•ŠëŠ” ìƒíƒœë¥¼ ë„£ê¸´í•˜ì§€ë§Œ ì´ë ‡ê²Œ í•´ë³´ëŠ” ê²ƒë„ ì‹œë„ëŠ” í•´ë³¼ë§Œí•  ê²ƒ ê°™ë‹¤. 

ë¬¸ì œëŠ” ë¶ˆí•„ìš”í•œ í›…ì„ ì¼ìœ¼í‚¨ë‹¤ëŠ” ê²ƒ. 

2. ê·¸ëŸ¼ ë‘ê°œì˜ í›…ì„ ë§Œë“œëŠ”ê²Œ ë‚˜ì„ê¹Œ? ê·¸ëŸ¼ ì„œë²„ì™€ í†µì‹ í• ë•Œë§ˆë‹¤ í›…ì„ ê³„ì† ë§Œë“œëŠ”ê²Œ ë§ëŠ”ê±¸ê¹Œ? 

ë‹¤ìŒë‚ 
1. useHttpAxios í›…ì„ ë§Œë“¤ì–´ì„œ useEffectë¥¼ ì¬ì‚¬ìš©í•˜ì 


```tsx
import { useEffect, useState } from "react";

const useHttpAxios = (asyncFunc: () => Promise<any>) => {
	const [data, setData] = useState<any>();

	useEffect(() => {
		asyncFunc();
	}, []);
	return { data, setData };
};

export default useHttpAxios;

```

ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë³´ë‚´ì¤˜ useEffectë¥¼ ì²˜ë¦¬í•œë‹¤.

    

### ë””ìì¸ (CSS) Requirements

- [x] ì±„íŒ…ë°© í¬ê¸°ëŠ” 360 * 720ìœ¼ë¡œ ê³ ì •
```js
//global.css
body {
	margin: 0 auto;
	display: flex;
	place-items: center;
	width: 360px;
	height: 720px;
}
```

- [x] ì±„íŒ…ë°© ìƒë‹¨ ë°”, í•˜ë‹¨ input area background-color: #FAF0E1
- [x] ì±„íŒ…ë°© background-color: #FFF9EF
- [x] ìƒëŒ€ ë©”ì‹œì§€ background-color: í°ìƒ‰, ë‚˜ì˜ ë©”ì‹œì§€ background-color: #03006E
- [x] ë©”ì‹œì§€ëŠ” flexbox í˜•íƒœë¡œ êµ¬í˜„
- [x] ë©”ì‹œì§€ê°€ ì—¬ëŸ¬ ì¤„ì¸ ê²½ìš° ë°•ìŠ¤ í¬ê¸°ê°€ ë¶€ëª¨ë¥¼ ë„˜ì–´ê°€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì ì ˆí•œ max-width ê°’ì„ í• ë‹¹ , í˜„ì¬ëŠ” 230 Pxë¡œ ì„¤ì •
- [x] ìƒëŒ€ë°© ë©”ì‹œì§€ ë°•ìŠ¤ì˜ border-radiusëŠ” ì¢Œìƒë‹¨=0, ë‚˜ë¨¸ì§€=12px (ì´ë¯¸ì§€ ì°¸ê³ )
- [x] í—¤ë”ì˜ back ì•„ì´ì½˜ê³¼ ì „ì†¡ ë²„íŠ¼ì˜ ì•„ì´ì½˜ì€ ë¨¸í„°ë¦¬ì–¼ ì•„ì´ì½˜ì„ ì‚¬ìš© (chevron_left, arrow_back) ê·¸ëƒ¥ í¸í•œ react-iconìœ¼ë¡œ ëŒ€ì²´ 

### ì¶”ê°€ êµ¬í˜„ (optional)

- í”„ë¡œí•„ ì‚¬ì§„ í´ë¦­ì‹œ í™•ëŒ€ ì‚¬ì§„ íŒì—…
- ë©”ì„¸ì§€ í´ë¦­ì‹œ í´ë¦½ë³´ë“œì— ë³µì‚¬

```tsx
import React from 'react'; function Message({ text }) { const handleCopy = () => { navigator.clipboard.writeText(text) .then(() => { console.log('ë©”ì‹œì§€ ë³µì‚¬ë¨:', text); // ë³µì‚¬ ì„±ê³µ ì‹œ ì¶”ê°€ì ì¸ ì²˜ë¦¬ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. }) .catch((error) => { console.error('ë©”ì‹œì§€ ë³µì‚¬ ì‹¤íŒ¨:', error); // ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. }); }; return ( <div onClick={handleCopy}> {text} </div> ); } export default Message;
```
- [x] ë©”ì„¸ì§€ ì…ë ¥ì°½ì—ì„œ ì—”í„°í‚¤ ì…ë ¥ìœ¼ë¡œë„ ë©”ì„¸ì§€ ì „ì†¡
- [x] ì „ì†¡ ë²„íŠ¼ì€ ë©”ì‹œì§€ì˜ length > 0ì¼ ë•Œë§Œ ë³´ì´ë„ë¡ êµ¬í˜„ (like ì¹´í†¡)
```tsx
{!!userInputValue && (
		<FiArrowUpCircle className="absolute right-3 text-3xl text-white fill-main" />
)}
```

- [x] ë©”ì„¸ì§€ëŠ” created_at(ë³´ë‚¸ì‹œê°„) ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- [x] (created_at ì´ ê°™ìœ¼ë©´ id ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´ ë©ë‹ˆë‹¤)
- [x] ë‚ ì§œ ë³´ì—¬ì£¼ê¸° 
- [x] ëŒ€í™”ì°½ /n ì²˜ë¦¬ 
	```ts
	{msg.content.split("\\n").map((line, index) => {
		return <p key={index}>{line}</p>;
	})}
	```

- [x] í—¤ë” ì´ë¦„ê³¼ ì´ë¯¸ì§€ ìŒ 
- [x] ì„ì‹œ ì—…ë°ì´íŠ¸!! ê¸°ëŠ¥ êµ¬í˜„ 
- [x] í”„ë¡œí•„ ì‚¬ì§„ í´ë¦­ì‹œ í™•ëŒ€ ì‚¬ì§„ íŒì—…
- [ ] ë©”ì„¸ì§€ í´ë¦­ì‹œ í´ë¦½ë³´ë“œì— ë³µì‚¬
-> ë°ì´í„°ê°€ ìœ„ë¡œ ìŒ“ì´ëŠ” ë¬¸ì œ
```tsx
const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
		e.preventDefault();
		setMessages((prev) => [
			...prev,
			{
				created_at: "2023-06-10 13:00:00",
				id: 140,
				msg: {
					mtype: "text",
					content: "dfdf",
				},
				photo_url: "https://photo.vanillabridge.com/app_photos/agent_man.JPG",
				user_id: 2,
				user_name: "ì£¼ì„ ì",
			},
		]);
		setUserInputValue("");
	};
```
![[ìŠ¤í¬ë¦°ìƒ· 2023-06-30 ì˜¤í›„ 4.58.26.png]]

ì•„!!!! íƒ€ì„ì„ ì •ë ¬ì‹œì¼œë†”ì„œ ê·¸ë ‡êµ¬ë‚˜!! ì—¬ê¸°ì„œ new-dateë¡œ í•´ì•¼ê² ë‹¤



# êµ¬í˜„ ê³¼ì •
[[ê³¼ì œ ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ.excalidraw]]
![[ê³¼ì œ ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ.excalidraw.png | 900]]



# ë¦¬íŒ©í† ë§
1. chatSection ì˜ arbitrary valueë¥¼ ì‚¬ìš©í–ˆëŠ”ë° ë‹¤ë¥¸ ë°©ë²• ê°„êµ¬í•´ë³´ê¸° 



# ì—ëŸ¬

3. TypeError ì„œë²„ í˜¸ì¶œ ì—†ì´ ì„ì˜ë¡œ ë°ì´í„° ì¶”ê°€í•  ë•Œ 
MessageInfoType[] | undefined' í˜•ì‹ì—ëŠ” ë°˜ë³µê¸°ë¥¼ ë°˜í™˜í•˜ëŠ” '[Symbol.iterator]()' ë©”ì„œë“œê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.


4. TypeError userInputì„ í´ë¦­í• ë•Œ domì˜ refë¥¼ ê¸°ë°˜ìœ¼ë¡œ scrollì„ ìµœí•˜ë‹¨ìœ¼ë¡œ ë‚´ë¦´ë•Œ ìƒê¸°ëŠ” TypeError





6. useHttpAxios í›…ì„ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ type ì—ëŸ¬ 
```tsx
import { useEffect, useState } from "react";
import { useMessageService } from "./useMessageService";
import { MessageInfoType, MessageResponse } from "../types/MessageType";

const useHttpAxios = (action: string) => {
	const messageService = useMessageService();
	const [data, setDate] = useState<any>();

// ë³€ê²½ ì „
	const getData = async () => {
		const dataList = await messageService.getAllMessage();
		setDate(dataList);
	};

	useEffect(() => {
		getData();
	}, []);

	return data;
};
export default useHttpAxios;


// ë³€ê²½ í›„
const getData = async () => {
	const dataList = await messageService[action]();
	setDate(dataList);
};

```

messageServcie.getAllMessage()ë¥¼ messageService[props] ( ) ë¡œ ë³€ê²½í•˜ì˜€ë‹¤. ê·¸ ì´ìœ ëŠ” ì¸ìì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ í•˜ì—¬ axios ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ MessageServiceì˜ typeì„ ìˆ˜ì •í–ˆë‹¤.

```tsx
// ì „
export interface MessageService {
	getAllMessage: () => MessageResponse;
}

// í›„
export interface MessageService {
	getAllMessage: () => MessageResponse;
	[key: string]: () => MessageResponse;
}

```

ì—ëŸ¬ê°€ ì‚¬ë¼ì ¸ í•œìˆ¨ì„ ëŒë¦¬ëŠ” ì°°ë‚˜, MessageService íƒ€ì…ì„ ì£¼ì… ì‹œì¼œ ë§Œë“  í´ë˜ìŠ¤ì¸ MessageServiceImplì—ì„œ ì—ëŸ¬ê°€ ë“±ì¥í–ˆë‹¤. 

```tsx
//'MessageServiceImpl' í´ë˜ìŠ¤ê°€ 'MessageService' ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ëª» êµ¬í˜„í•©ë‹ˆë‹¤.  
//'MessageServiceImpl' í˜•ì‹ì— ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ ìœ í˜• 'string'ì´(ê°€) ì—†ìŠµë‹ˆë‹¤.

export default class MessageServiceImpl implements MessageService {
	constructor(private httpClient: AxiosInstance) {}

	async getAllMessage() {
		const response = await this.httpClient.get<MessageResponse>("test_data");
		const { data } = response;

		return data;
	}

...
}

```

MessageServiceImpl í´ë˜ìŠ¤ê°€ MessageService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ëª» êµ¬í˜„í•œë‹¤ê³  í•˜ëŠ”ë° ì–´ë”œ ìˆ˜ì •í•´ì•¼í•˜ëŠ”ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. ê°ì²´ì— ë¬¸ìì—´ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒ ìì²´ë¥¼ í•˜ì§€ ë§ì•˜ì–´ì•¼í–ˆë‚˜ ì‹¶ë‹¤. í•˜ì§€ë§Œ ê³µí†µìœ¼ë¡œ í›…ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ê·¸ëŸ´ ìˆ˜ ë°–ì— ì—†ì§€ ì•Šë‚˜? ë¼ê³  ìƒê°ì´ ë“ ë‹¤. 

2. created_atì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ì‹œ íƒ€ì… ì—ëŸ¬ 
```tsx
	const sortedMessageBasedOnTimes = (messages: MessageInfoType[]) => {
		// ë°°ì—´ êµ¬ì¡° ë³€ê²½í•˜ì—¬ created_atì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
		console.log("ì „", messages);
		messages.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));
		console.log("í›„", messages);
	};
	sortedMessageBasedOnTimes(messages);


messages.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));


// í›„
messages.sort((a, b) => +new Date(a.created_at) - +new Date(b.created_at));
```

ì‚°ìˆ  ì—°ì‚°ì˜ ì™¼ìª½ì€ 'any', 'number', 'bigint' ë˜ëŠ” ì—´ê±°í˜• í˜•ì‹ì´ì–´ì•¼ í•œë‹¤ëŠ”ë° ì˜ ëª¨ë¥´ëŠ” ì—ëŸ¬ë¥¼ ë§Œë‚¬ë‹¤. í˜„ì¬ Date ê°ì²´ í˜•ì‹ì¸ë° ìŒ 

ë‹¨í•­ ì—°ì‚°ì (Unary operator)ì¸ + ë¥¼ ì§€ì •í•˜ë©´ ëœë‹¤ê³  í•œë‹¤.

ìœ„ì™€ ê°™ì´ ì§€ì •í•˜ë©´Â **new Date()**ì˜ ê²°ê³¼ë¥¼ ìˆ«ì(number)ë¡œ ì·¨ê¸‰ë˜ê¸° ë•Œë¬¸ì— ì—°ì‚°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
``


